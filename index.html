<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scratch Clone</title>
    <style>
        /* Global Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }

        /* Header or Title */
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        /* Stage (Main Canvas for Sprite) */
        #stage {
            width: 600px;
            height: 400px;
            background-color: #add8e6;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        /* The Scratch Cat Sprite */
        #cat {
            width: 50px;
            height: 50px;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/a/a2/Scratch_Logo.svg');
            background-size: contain;
            background-repeat: no-repeat;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s ease-in-out;
        }

        /* Blocks Container */
        #blocks-container {
            width: 200px;
            background-color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .block {
            padding: 12px;
            background-color: #f39c12;
            margin: 10px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .block:hover {
            background-color: #e67e22;
            transform: translateY(-3px);
        }

        .block-in-playground {
            background-color: #f39c12;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            width: fit-content;
        }

        .block-in-playground:hover {
            background-color: #e67e22;
            transform: translateY(-3px);
        }

        /* Playground Area (Where Blocks are Dropped) */
        #playground {
            width: 600px;
            height: 300px;
            background-color: #ecf0f1;
            border: 2px dashed #7f8c8d;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: flex-start;
        }

        /* Run Buttons Area */
        #run-buttons {
            display: flex;
            gap: 15px;
        }

        #run-buttons button {
            padding: 12px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            width: 120px;
        }

        #green-flag {
            background-color: #2ecc71;
            color: white;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        #green-flag:hover {
            background-color: #27ae60;
        }

        #red-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }

        #red-button:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>

    <h1>Scratch Clone</h1>

    <!-- Stage (Main Canvas for Sprite) -->
    <div id="stage">
        <div id="cat" class="draggable"></div>
    </div>

    <!-- Blocks Container -->
    <div id="blocks-container">
        <div class="block" data-action="move">Move</div>
        <div class="block" data-action="turn">Turn</div>
        <div class="block" data-action="say">Say</div>
        <div class="block" data-action="change-color">Change Color</div>
        <div class="block" data-action="wait">Wait</div>
        <div class="block" data-action="hide">Hide</div>
        <div class="block" data-action="show">Show</div>
        <div class="block" data-action="go-to">Go to X, Y</div>
        <div class="block" data-action="play-sound">Play Sound</div>
    </div>

    <!-- Playground Area (Where Blocks are Dropped) -->
    <div id="playground">
        <p><strong>Code Playground</strong></p>
    </div>

    <!-- Run and Stop Buttons -->
    <div id="run-buttons">
        <button id="green-flag">Green Flag (Run)</button>
        <button id="red-button">Stop</button>
    </div>

    <script>
        // Handling Dragging for Blocks
        const blocks = document.querySelectorAll('.block');
        const playground = document.getElementById('playground');

        blocks.forEach(block => {
            block.addEventListener('mousedown', (e) => {
                const newBlock = document.createElement('div');
                newBlock.classList.add('block-in-playground');
                newBlock.textContent = block.textContent;
                newBlock.dataset.action = block.dataset.action;

                newBlock.style.position = 'absolute';
                newBlock.style.left = `${e.clientX - playground.offsetLeft}px`;
                newBlock.style.top = `${e.clientY - playground.offsetTop}px`;
                
                playground.appendChild(newBlock);

                newBlock.addEventListener('mousedown', startDrag);
                newBlock.addEventListener('mouseup', stopDrag);
            });
        });

        let draggedBlock = null;

        function startDrag(e) {
            draggedBlock = e.target;
            const offsetX = e.clientX - draggedBlock.getBoundingClientRect().left;
            const offsetY = e.clientY - draggedBlock.getBoundingClientRect().top;

            function dragMove(e) {
                draggedBlock.style.left = `${e.clientX - playground.offsetLeft - offsetX}px`;
                draggedBlock.style.top = `${e.clientY - playground.offsetTop - offsetY}px`;
            }

            function stopDrag() {
                document.removeEventListener('mousemove', dragMove);
                draggedBlock.removeEventListener('mouseup', stopDrag);
            }

            document.addEventListener('mousemove', dragMove);
            draggedBlock.addEventListener('mouseup', stopDrag);
        }

        // Green Flag Click - Execute the Blocks
        const greenFlag = document.getElementById('green-flag');
        greenFlag.addEventListener('click', () => {
            const blocksInPlayground = document.querySelectorAll('.block-in-playground');
            blocksInPlayground.forEach(block => {
                handleBlockAction(block.dataset.action);
            });
        });

        // Stop Button Click - Reset Sprite
        const redButton = document.getElementById('red-button');
        redButton.addEventListener('click', () => {
            resetSprite();
        });

        // Handle Block Actions
        function handleBlockAction(action) {
            switch (action) {
                case 'move':
                    moveSprite();
                    break;
                case 'turn':
                    turnSprite();
                    break;
                case 'say':
                    spriteSay();
                    break;
                case 'change-color':
                    changeSpriteColor();
                    break;
                case 'wait':
                    waitAction();
                    break;
                case 'hide':
                    hideSprite();
                    break;
                case 'show':
                    showSprite();
                    break;
                case 'go-to':
                    goToPosition();
                    break;
                case 'play-sound':
                    playSound();
                    break;
                default:
                    console.log('Unknown action');
            }
        }

        // Block Actions Functions
        function moveSprite() {
            const currentX = parseInt(cat.style.left);
            const currentY = parseInt(cat.style.top);
            cat.style.left = `${currentX + 50}px`; // Move sprite to the right
        }

        function turnSprite() {
            const currentRotation = cat.style.transform.replace(/[^\d.]/g, '');
            const newRotation = currentRotation ? parseInt(currentRotation) + 45 : 45;
            cat.style.transform = `translate(-50%, -50%) rotate(${newRotation}deg)`;
        }

        function spriteSay() {
            alert("Meow! I'm the Scratch Cat!");
        }

        function changeSpriteColor() {
            const currentColor = cat.style.backgroundColor;
            const newColor = currentColor === 'rgb(255, 99, 71)' ? '#3498db' : '#ff6347'; // Toggle between two colors
            cat.style.backgroundColor = newColor;
        }

        function waitAction() {
            setTimeout(() => {
                console.log("Waited for 1 second!");
            }, 1000);
        }

        function hideSprite() {
            cat.style.display = 'none';
        }

        function showSprite() {
            cat.style.display = 'block';
        }

        function goToPosition() {
            cat.style.left = '200px';
            cat.style.top = '200px';
        }

        function playSound() {
            const audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3');
            audio.play();
        }

        // Reset sprite to its original position
        function resetSprite() {
            cat.style.left = '50%';
            cat.style.top = '50%';
            cat.style.transform = 'translate(-50%, -50%)';
            cat.style.backgroundColor = '#ff6347';
            cat.style.display = 'block';
        }
    </script>

</body>
</html>
